var fsmy=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"FSM",(function(){return r}));class r{constructor(t,e){this._transitions=t,this._transitionInProcess=!1,this.transition(e)}goto(t,e){this._currentState=null,this.transition(t,e)}dispose(){this.onEnterState=null,this.onLeaveState=null,this.getStateName=null,this._transitions=null}transition(t,e){setTimeout(async()=>{var n,r;const o=this._currentState,i=this.getStateName&&this.getStateName(o)||o,a=this.getStateName&&this.getStateName(t)||t;if(this._transitionInProcess)console.error("transition in process to "+i);else if(this.canTransition(t)){this._currentState=t,console.log(`transition from ${i} to ${a}`);const{onLeaveStateStart:s,onLeaveStateEnd:u}=(null===(n=this._transitions[o])||void 0===n?void 0:n.state)||{},{onEnterStateStart:l,onEnterStateEnd:c}=(null===(r=this._transitions[t])||void 0===r?void 0:r.state)||{},{onEnterState:f,onLeaveState:d}=this;this._transitionInProcess=!0,await Promise.all([d&&d({from:o,to:t,data:e}),s&&s({from:o,to:t,data:e})]),u&&await u({from:o,to:t,data:e}),await Promise.all([f&&f({from:o,to:t,data:e}),l&&l({from:o,to:t,data:e})]),c&&await c({from:o,to:t,data:e}),this._transitionInProcess=!1}else console.error(`Can't transition from ${i} to ${a}`)})}getCurrentState(){return this._currentState}canTransition(t){return!this._currentState||this._transitions[this._currentState].to.indexOf(t)>-1}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mc215L2luZGV4LmpzIl0sIm5hbWVzIjpbImZzbXkiLCJtb2R1bGVzIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9fd2VicGFja19leHBvcnRzX18iLCJGU00iLCJbb2JqZWN0IE9iamVjdF0iLCJfdHJhbnNpdGlvbnMiLCJpbml0U3RhdGUiLCJ0aGlzIiwiX3RyYW5zaXRpb25JblByb2Nlc3MiLCJ0cmFuc2l0aW9uIiwic3RhdGUiLCJkYXRhIiwiX2N1cnJlbnRTdGF0ZSIsIm9uRW50ZXJTdGF0ZSIsIm9uTGVhdmVTdGF0ZSIsImdldFN0YXRlTmFtZSIsInRvIiwic2V0VGltZW91dCIsImFzeW5jIiwiX2EiLCJfYiIsImZyb20iLCJmcm9tTmFtZSIsInRvTmFtZSIsImNvbnNvbGUiLCJlcnJvciIsImNhblRyYW5zaXRpb24iLCJsb2ciLCJvbkxlYXZlU3RhdGVTdGFydCIsIm9uTGVhdmVTdGF0ZUVuZCIsIm9uRW50ZXJTdGF0ZVN0YXJ0Iiwib25FbnRlclN0YXRlRW5kIiwiUHJvbWlzZSIsImFsbCIsImluZGV4T2YiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLEtBQ0ssU0FBVUMsR0FFVCxJQUFJQyxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxR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